<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Adapt to high DPI display</title>
<script type="text/javascript">
function altRows(id){
	if(document.getElementsByTagName){
		var table = document.getElementById(id);
		var rows = table.getElementsByTagName("tr");
		for(i = 0; i < rows.length; i++){      
			if(i % 2 == 0){
			rows[i].className = "evenrowcolor";
			}else{
				rows[i].className = "oddrowcolor";
			}      
		}
	}
}
window.onload=function(){
altRows('alternatecolor');
}
</script>
<style type="text/css">
body
{
padding-left:20px;
padding-top:10px;
padding-right:20px;
padding-bottom:20px;
}
p{
	font-family:  Segoe UI, Arial, 微软雅黑, sans-serif;
	font-size: 10pt;
}
table.noborder {
	font-family:  Segoe UI, Arial, 微软雅黑, sans-serif;
	font-size: 10pt;
	border-width: 0px;
} 
table.altrowstable {
	border-collapse: collapse;  
	font-family:  Segoe UI, Arial, 微软雅黑, sans-serif;
	font-size: 10pt;
	border-width: 1px;
	border-color: #888888;
	border-collapse: collapse;
} 
table.altrowstable th {
	border-width: 1px;
	padding: 8px;
	border-style: solid;
	border-color: #888888;
	background: #c3dde0;
}  
table.altrowstable td {
border-width: 1px;
padding: 8px;
border-style: solid;
border-color: #888888;
}
.oddrowcolor{
background-color:#ffffff;
}
.evenrowcolor{
background-color:#eeeeee;
}
</style>
</head>

<body>
<p align="center"><font size="+1", style="font-weight:bold;">Adapt to high DPI display</font></p>
<hr>
<p>
As you change font size in CUI preferences setting in foobar2000, the sizes of the UI elements on foobox panels will change accordingly. But due to the limitation of 
CUI + Panel Stack Splitter (PSS), the sizes of the panels themselves will not change. The sizes of the panels are controled by PSS, and foobox has set-up a global variable 
for the panel sizing but you have to revise this variable manully according to the font-size you have selected.</p>
<p>This variable is just the value of font-size you have chosen， the unit is <font style="font-weight:bold;">pixel, px</font>. But in Windows font dialog we choose font-size
by the unit of font weight, pt. So, we have to know the relationship between px and pt.</p>
<table class="noborder">
<tr><td width="165" align="right" valign="top"><font style="font-weight:bold;" color="#0d7d0f">pt (point):</font></td>
<td> desktop publishing point (DTP point), defined as ​1⁄72 inch (0.35 mm). Normally in the font dialogs of Windows, the font unit is "pt".</td>
</tr>
<tr><td width="165" align="right" valign="top"><font style="font-weight:bold;" color="#0d7d0f">px (pixel):</font></td>
<td>We can simpely learn that in a 96 DPI screen (Windows default), 1px =  roughly 1⁄96 inch (0.26 mm). So px is DPI (dots per inch) related, not a fixed physical size.</td>
</table>
<p>From above, we can conclude conversion of pt and px by below formula:<br />
<font color="#0d7d0f">pt = px * 72 / dpi</font></p>
<p>If in Windows the zoom vaule is not 100% (in high resolution screen, you may set it to 150%, 200% etc), then DPI is not 96 any more, zoom value is to be considered in the conversion:<br />
<font color="#d70c0c">
pt = (px * 72 / 96) / zoom = (px * 3 / 4) / zoom<br />
px = (pt * 96 / 72) * zoom = (pt * 4 / 3) * zoom
</font>
</p>
<p>Here we need to obtain px value from pt value, below table can avoid calculation, you can take the value directly as necessary.
</p>
<table class="altrowstable" id="alternatecolor">
<tr>
<th><font style="font-weight:bold;">&nbsp;&nbsp;&nbsp;pt&nbsp;&nbsp;&nbsp;</font></th>
<th><font style="font-weight:bold;">px (DPI 96)</font><br />zoom=100%</th>
<th><font style="font-weight:bold;">px</font><br />zoom=125%</th>
<th><font style="font-weight:bold;">px</font><br />zoom=150%</th>
<th><font style="font-weight:bold;">px</font><br />zoom=200%</th>
</tr>
<tr>
<td>42</td><td>56</td><td>70</td><td>84</td><td>112</td>
</tr>
<tr>
<td>36</td><td>48</td><td>60</td><td>72</td><td>96</td>
</tr>
<tr>
<td>34</td><td>45</td><td>57</td><td>68</td><td>91</td>
</tr>
<tr>
<td>32</td><td>42</td><td>53</td><td>64</td><td>85</td>
</tr>
<tr>
<td>30</td><td>40</td><td>50</td><td>60</td><td>80</td>
</tr>
<tr>
<td>29</td><td>38</td><td>48</td><td>58</td><td>77</td>
</tr>
<tr>
<td>28</td><td>37</td><td>47</td><td>56</td><td>75</td>
</tr>
<tr>
<td>27</td><td>36</td><td>45</td><td>54</td><td>72</td>
</tr>
<tr>
<td>26</td><td>35</td><td>43</td><td>52</td><td>69</td>
</tr>
<tr>
<td>25</td><td>34</td><td>42</td><td>50</td><td>67</td>
</tr>
<tr>
<td>24</td><td>32</td><td>40</td><td>48</td><td>64</td>
</tr>
<tr>
<td>22</td><td>29</td><td>37</td><td>44</td><td>59</td>
</tr>
<tr>
<td>20</td><td>26</td><td>33</td><td>40</td><td>53</td>
</tr>
<tr>
<td>18</td><td>24</td><td>30</td><td>36</td><td>48</td>
</tr>
<tr>
<td>17</td><td>23</td><td>28</td><td>34</td><td>45</td>
</tr>
<tr>
<td>16</td><td>22</td><td>27</td><td>32</td><td>43</td>
</tr>
<tr>
<td>15</td><td>21</td><td>25</td><td>30</td><td>40</td>
</tr>
<tr>
<td>14.5</td><td>20</td><td>24</td><td>29</td><td>39</td>
</tr>
<tr>
<td>14</td><td>19</td><td>23</td><td>28</td><td>37</td>
</tr>
<tr>
<td>13.5</td><td>18</td><td>23</td><td>27</td><td>36</td>
</tr>
<tr>
<td>13</td><td>17</td><td>22</td><td>26</td><td>35</td>
</tr>
<tr>
<td>12</td><td>16</td><td>20</td><td>24</td><td>32</td>
</tr>
<tr>
<td>11</td><td>15</td><td>19</td><td>22</td><td>29</td>
</tr>
<tr>
<td>10.5</td><td>14</td><td>18</td><td>21</td><td>28</td>
</tr>
<tr>
<td>10</td><td>13</td><td>17</td><td>20</td><td>27</td>
</tr>
<tr>
<td>9</td><td>12</td><td>15</td><td>18</td><td>24</td>
</tr>
<tr>
<td>8</td><td>11</td><td>14</td><td>16</td><td>21</td>
</tr>
<tr>
<td>7.5</td><td>10</td><td>13</td><td>15</td><td>20</td>
</tr>
<tr>
<td>7</td><td>9</td><td>12</td><td>14</td><td>19</td>
</tr>
<tr>
<td>6.5</td><td>8</td><td>11</td><td>13</td><td>17</td>
</tr>
<tr>
<td>5.5</td><td>7</td><td>9</td><td>11</td><td>15</td>
</tr>
<tr>
<td>5</td><td>6</td><td>8</td><td>10</td><td>13</td>
</tr>
</table>
<p><font style="font-weight:bold;">Following is the practice: We change the font size from 10pt to 13pt (zoom = 100%), from above table, the new font size is 17px.</font></p>
<font color="#0d7d0f" style="font-weight:bold;">
<p>1) Open foobar2000 Prefrerence dialog，we change the CUI font size here.</p>
<img src="images/dpi01.png" width="740" height="541" /><br /><br />
<p>2) Changed to 13pt, size of UI elements have been changed accordingly, but the size of panels, eg. height of topbar, bottom bar, are still unchanged. Continue...</p>
<img src="images/dpi02.png" border="1" width="835" height="297" /><br /><br />
<p>3) Go to CUI Layout dialog, pick the first PSS splitter, press Configure... button.</p>
<img src="images/dpi03.png" width="740" height="541" /><br /><br />
<p>3) In the Scipt page of the splitter setting dialog, change the first variable FontSize_px to the expected px value 17, then press OK untill return back to foobar2000 interface.</p>
<img src="images/dpi04.png" width="574" height="544" /><br /><br />
<p>4) If successful, you can see the size of topbar and bottom bar have been changed adapting the UI elements. If not successful, go to the PSS setting dialog again, to check the global variable whether has been loaded, you may press OK again, or you
can press "Delete all", then the global values will be reloaded.</p>
<img src="images/dpi05.png" width="765" height="642" /><br /><br />
</font>
<br />
<p>---The End---</p>
<p></p>
</body>
</html>
